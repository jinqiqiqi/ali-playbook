# [common] is integral section
[common]
# A literal address or host name for IPv6 must be enclosed
# in square brackets, as in "[::1]:80", "[ipv6-host]:http" or "[ipv6-host%zone]:80"
server_addr = {{ frps_server }}
server_port = {{ frps_port }}

# if you want to connect frps by http proxy or socks5 proxy, you can set http_proxy here or in global environment variables
# it only works when protocol is tcp
# http_proxy = http://user:passwd@192.168.1.128:8080
# http_proxy = socks5://user:passwd@192.168.1.128:1080

# console or real logFile path like ./frpc.log
log_file = /var/log/frpc.log

# trace, debug, info, warn, error
log_level = info

log_max_days = 3

# for authentication
token = {{ frp_token }}

# set admin address for control frpc's action by http api such as reload
admin_addr = {{ ansible_host }}
admin_port = {{ admin_port }}
admin_user = {{ admin_user }}
admin_pwd = {{ admin_pwd }}

# connections will be established in advance, default value is zero
pool_count = 5

# if tcp stream multiplexing is used, default is true, it must be same with frps
tcp_mux = true

# your proxy name will be changed to {user}.{proxy}
user = eefocus

# decide if exit program when first login failed, otherwise continuous relogin to frps
# default is true
login_fail_exit = true

# communication protocol used to connect to server
# now it supports tcp and kcp and websocket, default is tcp
protocol = tcp

# if tls_enable is true, frpc will connect frps by tls
tls_enable = true

# specify a dns server, so frpc will use this instead of default one
# dns_server = 8.8.8.8

# proxy names you want to start divided by ','
# default is empty, means all proxies
# start = ssh,dns

# heartbeat configure, it's not recommended to modify the default value
# the default value of heartbeat_interval is 10 and heartbeat_timeout is 90
# heartbeat_interval = 30
# heartbeat_timeout = 90

# 'ssh' is the unique proxy name
# if user in [common] section is not empty, it will be changed to {user}.{proxy} such as 'your_name.ssh'

{% for frp_c in frpc_clients %}
###### start {{ frp_c.name }} ######
[{{ frp_c.name }}]
type = {{ frp_c.type }}
local_ip = {{ frp_c.local_ip }}
local_port = {{ frp_c.local_port }}
remote_port = {{ frp_c.remote_port }}
use_encryption = {{ frp_c.use_encryption }}
use_compression = {{ frp_c.use_compression }}
###### end {{ frp_c.name }} ######

{% endfor %}
## END CONFIG FILE.
